<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<style>
			.cell {
				display: inline-block;
				position: relative;
				width: 200px;
				height: 200px;
				background: 'yellow';
				overflow: hidden;
			}
			.gopher,
			.bomb {
				width: 200px;
				height: 200px;
				bottom: 0;
				position: absolute;
				transition: bottom 1s;
			}
			.gopher {
				background: url('./assets/gopher.png') center center no-repeat;
				background-size: 200px 200px;
			}
			.dead {
				background: url('./assets/dead_gopher.png') center center no-repeat;
				background-size: 200px 200px;
			}
			.bomb {
				background: url('./assets/bomb.png') center center no-repeat;
				background-size: 200px 200px;
			}
			.boom {
				background: url('./assets/explode.png') center center no-repeat;
				background-size: 200px 200px;
			}
			.hidden {
				bottom: -200px;
			}
			.hole {
				width: 200px;
				height: 150px;
				position: absolute;
				bottom: 0;
				background: url('./assets/mole-hole.png') center center no-repeat;
				background-size: 200px 150px;
			}
			.hole-front {
				width: 200px;
				height: 30px;
				position: absolute;
				bottom: 0;
				background: url('./assets/mole-hole-front.png') center center no-repeat;
				background-size: 200px 30px;
			}
		</style>
	</head>
	<body>
		<div>
			<span id="timer">8</span>Ï¥à&nbsp; <span id="score">0</span>Ï†ê
			<button id="start">ÏãúÏûë</button>
		</div>
		<div id="game">
			<div class="row">
				<div class="cell">
					<div class="hole"></div>
					<div class="gopher hidden"></div>
					<div class="bomb hidden"></div>
					<div class="hole-front"></div>
				</div>
				<div class="cell">
					<div class="hole"></div>
					<div class="gopher hidden"></div>
					<div class="bomb hidden"></div>
					<div class="hole-front"></div>
				</div>
				<div class="cell">
					<div class="hole"></div>
					<div class="gopher hidden"></div>
					<div class="bomb hidden"></div>
					<div class="hole-front"></div>
				</div>
			</div>
			<div class="row">
				<div class="cell">
					<div class="hole"></div>
					<div class="gopher hidden"></div>
					<div class="bomb hidden"></div>
					<div class="hole-front"></div>
				</div>
				<div class="cell">
					<div class="hole"></div>
					<div class="gopher hidden"></div>
					<div class="bomb hidden"></div>
					<div class="hole-front"></div>
				</div>
				<div class="cell">
					<div class="hole"></div>
					<div class="gopher hidden"></div>
					<div class="bomb hidden"></div>
					<div class="hole-front"></div>
				</div>
			</div>
			<div class="row">
				<div class="cell">
					<div class="hole"></div>
					<div class="gopher hidden"></div>
					<div class="bomb hidden"></div>
					<div class="hole-front"></div>
				</div>
				<div class="cell">
					<div class="hole"></div>
					<div class="gopher hidden"></div>
					<div class="bomb hidden"></div>
					<div class="hole-front"></div>
				</div>
				<div class="cell">
					<div class="hole"></div>
					<div class="gopher hidden"></div>
					<div class="bomb hidden"></div>
					<div class="hole-front"></div>
				</div>
			</div>
		</div>
		<script>
			const $startbtn = document.querySelector('#start');
			const $$cell = document.querySelectorAll('.cell');
			// const $$gopher = document.querySelectorAll('.gopher');
			// const $bomb = document.querySelector('.bomb');

			let started = false;
			let gopherPercent = 0.3; //ÎàÑÏ†ÅÌçºÏÑºÌä∏ Í∞úÎÖê
			let bombPercent = 0.5;

			let score = 0;
			let life = 3;

			const holes = Array.from($$cell);
			const items = [];

			function pop() {
				holes.forEach((hole, i) => {
					// if (!items.includes(0)) return;
					if (items[i]) return;
					const randomValue = Math.random();
					if (randomValue < gopherPercent) {
						const $gopher = holes[i].querySelector('.gopher');
						$gopher.classList.remove('hidden');
						items[i] = setTimeout(() => {
							$gopher.classList.add('hidden');
							items[i] = 0;
						}, 1000);
					} else if (randomValue < bombPercent) {
						const $bomb = holes[i].querySelector('.bomb');
						$bomb.classList.remove('hidden');
						items[i] = setTimeout(() => {
							$bomb.classList.add('hidden');
							items[i] = 0;
						}, 1000);
					}
				});
			}

			//Ïù∏ÌÑ∞Î≤åÏùÄ pop()Ïù¥ Ìò∏Ï∂úÎê† Îïå, ÌïúÎ≤àÎßå Ïã§ÌñâÎêòÏñ¥Ïïº ÌïúÎã§. üî• Ïù∏ÌÑ∞Î≤å ÏÑ†Ïñ∏ ÏúÑÏπò Ïã§Ïàò
			$startbtn.addEventListener('click', () => {
				if (started) return;
				started = true;
				const popId = setInterval(pop, 1000);
				pop();
			});
		</script>
	</body>
</html>
